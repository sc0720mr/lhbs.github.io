
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="mstile-310x310.png" />
    <style>
        body{margin: 0; padding: 0; background: #f7f7f7; font-family: 'Noto Sans Tc', Arial, Helvetica, sans-serif;}
        h1, p{margin: 0; padding: 0;}
        header{padding: 8px 20px; background: #09bc9d; color: #ffffff; display: flex; flex-direction: row; align-items: flex-start; justify-content:left; flex-wrap:nowrap; text-align: left;}
        header a{margin: auto 0 auto auto; display: block;}
        header a i{font-size: 30px; opacity: 0.5;}
        header h1{font-size: 21px;}
        header p{font-size: 15px;}
        .filterFunction, .fliterbtn, .container{padding: 8px 14px;}
        .filterFunction{font-size: 16px; border-bottom: 2px solid #09bc9d; text-align: center;}
        .filterFunction #dayType{font-size: 16px;}
        .filterFunction label + label{margin: 0 0 0 3px;}
        .fliterbtn{font-size: 13px;}
        .fliterbtn button{
            width: 100%; 
            height: 36px;
            align-items: center;
            background-color: #fa6400;
            border-radius: .25rem;
            box-shadow: rgba(0, 0, 0, 0.02) 0 1px 3px 0;
            color: #fff;
            cursor: pointer;
            display: inline-flex;
            font-size: 16px;
            font-weight: 600;
            justify-content: center;
            transition: all 250ms;
        }
        .fliterbtn button:hover {background-color: #fb8332;}
        .container{display: flex; flex-direction: row; align-items: center; justify-content: center;}
        #schedule{color: #696969; border-collapse: collapse;}
        #schedule thead th, #schedule tbody td{padding: 8px 15px; border: 1px solid #c8c8c8; font-size: 15px; text-align: center;}
        footer{padding: 8px 20px; font-size: 11px; color: #696969; text-align: center;}
        @media screen and (max-width:767px){#schedule{width: 100%;}}
        @media (min-width: 320px) and (max-width: 480px) {
            #schedule thead th, #schedule tbody td{font-size: 13px;}
        }
    </style>
    <title>水蓮山莊社區巴士及公車時刻表</title>
</head>
<body>
    <header>
        <div>
            <h1>水蓮山莊社區巴士及公車時刻表</h1>
            <p>Lotus Hill Bus Schedule</p>
        </div>
        <a onClick="window.location.reload()"><i class="fa-solid fa-rotate-right"></i></a>
    </header>
    
    <div class="filterFunction">
        <select id="dayType">
            <option value="workday">平日</option>
            <option value="holiday">假日</option>
        </select>
        <label><input type="radio" name="tripType" value="to" checked> 去程(水蓮出發)</label>
        <label><input type="radio" name="tripType" value="from"> 回程(返回水蓮)</label>
    </div>

    <div class="fliterbtn">
        <button onclick="filterSchedule()">以現在時間搜尋最接近班次</button>
    </div>

    <div class="container">
        <table id="schedule">
            <thead>
                <tr><th>時間</th><th>車輛</th><th>出發地➡︎目的地</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <footer>
        <div>Ver. 113.01.18 / Build：2024.09.11(Beta)</div>
        <div>Copyright &copy; 2024 Steven Chang. All rights reserved.</div>
    </footer>

    <script>
        const scheduleData = {
            workday: {
                to: [
                ["06:10", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["06:20", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["06:30", "591", "水蓮➡︎往南港火車站"],
                ["06:35", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["06:45", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["06:50", "591", "水蓮➡︎往南港火車站"],
                ["07:05", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["07:25", "社巴", "水蓮➡︎往東湖捷運站"],
                ["07:30", "591", "水蓮➡︎往南港火車站"], 
                ["07:40", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["08:00", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["08:00", "591", "水蓮➡︎往南港火車站"],
                ["08:20", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["08:30", "591", "水蓮➡︎往南港火車站"],
                ["08:40", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["09:00", "社巴", "水蓮➡︎往東湖捷運站"],
                ["09:00", "591", "水蓮➡︎往南港火車站"], 
                ["09:30", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["10:00", "591", "水蓮➡︎往南港火車站"],
                ["10:30", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["11:00", "591", "水蓮➡︎往南港火車站"],
                ["11:30", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["12:10", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["12:30", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["13:00", "591", "水蓮➡︎往南港火車站"],
                ["13:30", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["14:00", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["14:30", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["15:00", "591", "水蓮➡︎往南港火車站"],
                ["15:30", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["15:50", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["16:00", "591", "水蓮➡︎往南港火車站"],
                ["16:20", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["16:50", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["17:00", "591", "水蓮➡︎往南港火車站"],
                ["17:20", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["17:40", "591", "水蓮➡︎往南港火車站"],
                ["17:45", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["18:10", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["18:20", "591", "水蓮➡︎往南港火車站"],
                ["18:25", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["18:40", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["18:55", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["19:00", "591", "水蓮➡︎往南港火車站"],
                ["19:10", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["19:25", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["19:40", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["20:00", "591", "水蓮➡︎往南港火車站"],
                ["20:05", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["20:30", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["20:50", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["21:00", "591", "水蓮➡︎往南港火車站"],
                ["21:20", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["21:55", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["22:30", "社巴", "水蓮➡︎往東湖捷運站"]
                ],
                from: [
                ["06:25", "社巴", "東湖捷運站➡︎水蓮"], 
                ["06:35", "社巴", "東湖捷運站➡︎水蓮"], 
                ["06:50", "社巴", "東湖捷運站➡︎水蓮"],
                ["06:50", "591", "南港火車站➡︎水蓮"], 
                ["07:00", "社巴", "東湖捷運站➡︎水蓮"], 
                ["07:10", "591", "南港火車站➡︎水蓮"],
                ["07:20", "社巴", "東湖捷運站➡︎水蓮"], 
                ["07:40", "社巴", "東湖捷運站➡︎水蓮"], 
                ["07:50", "591", "南港火車站➡︎水蓮"],
                ["07:55", "社巴", "東湖捷運站➡︎水蓮"], 
                ["08:15", "社巴", "東湖捷運站➡︎水蓮"], 
                ["08:20", "591", "南港火車站➡︎水蓮"],
                ["08:35", "社巴", "東湖捷運站➡︎水蓮"], 
                ["08:50", "591", "南港火車站➡︎水蓮"],
                ["08:55", "社巴", "東湖捷運站➡︎水蓮"], 
                ["09:15", "社巴", "東湖捷運站➡︎水蓮"], 
                ["09:20", "591", "南港火車站➡︎水蓮"],
                ["09:45", "社巴", "東湖捷運站➡︎水蓮"],
                ["10:20", "591", "南港火車站➡︎水蓮"], 
                ["10:45", "社巴", "東湖捷運站➡︎水蓮"],
                ["11:20", "591", "南港火車站➡︎水蓮"], 
                ["11:45", "社巴", "東湖捷運站➡︎水蓮"], 
                ["12:25", "社巴", "東湖捷運站➡︎水蓮"], 
                ["12:45", "社巴", "東湖捷運站➡︎水蓮"],
                ["13:20", "591", "南港火車站➡︎水蓮"], 
                ["13:45", "社巴", "東湖捷運站➡︎水蓮"], 
                ["14:15", "社巴", "東湖捷運站➡︎水蓮"], 
                ["14:45", "社巴", "東湖捷運站➡︎水蓮"], 
                ["15:20", "591", "南港火車站➡︎水蓮"],
                ["15:45", "社巴", "東湖捷運站➡︎水蓮"], 
                ["16:05", "社巴", "東湖捷運站➡︎水蓮"], 
                ["16:20", "591", "南港火車站➡︎水蓮"],
                ["16:35", "社巴", "東湖捷運站➡︎水蓮"], 
                ["17:05", "社巴", "東湖捷運站➡︎水蓮"], 
                ["17:20", "591", "南港火車站➡︎水蓮"],
                ["17:35", "社巴", "東湖捷運站➡︎水蓮"], 
                ["18:00", "社巴", "東湖捷運站➡︎水蓮"], 
                ["18:00", "591", "南港火車站➡︎水蓮"],
                ["18:25", "社巴", "東湖捷運站➡︎水蓮"], 
                ["18:40", "社巴", "東湖捷運站➡︎水蓮"],
                ["18:40", "591", "南港火車站➡︎水蓮"], 
                ["18:55", "社巴", "東湖捷運站➡︎水蓮"],
                ["19:10", "社巴", "東湖捷運站➡︎水蓮"], 
                ["19:20", "591", "南港火車站➡︎水蓮"],
                ["19:25", "社巴", "東湖捷運站➡︎水蓮"], 
                ["19:40", "社巴", "東湖捷運站➡︎水蓮"], 
                ["19:55", "社巴", "東湖捷運站➡︎水蓮"], 
                ["20:20", "社巴", "東湖捷運站➡︎水蓮"], 
                ["20:20", "591", "南港火車站➡︎水蓮"],
                ["20:45", "社巴", "東湖捷運站➡︎水蓮"], 
                ["21:05", "社巴", "東湖捷運站➡︎水蓮"], 
                ["21:20", "591", "南港火車站➡︎水蓮"],
                ["21:35", "社巴", "東湖捷運站➡︎水蓮"], 
                ["22:10", "社巴", "東湖捷運站➡︎水蓮"], 
                ["22:45", "社巴", "東湖捷運站➡︎水蓮"]
                ]
            },
            holiday: {
                to: [
                ["06:30", "社巴", "水蓮➡︎往南港火車站"], 
                ["07:00", "591", "水蓮➡︎往南港火車站"],
                ["07:30", "社巴", "水蓮➡︎往南港火車站"], 
                ["08:00", "591", "水蓮➡︎往南港火車站"],
                ["08:30", "社巴", "水蓮➡︎往南港火車站"],
                ["09:00", "591", "水蓮➡︎往南港火車站"],
                ["09:30", "社巴", "水蓮➡︎往南港火車站"], 
                ["10:00", "591", "水蓮➡︎往南港火車站"],
                ["10:30", "社巴", "水蓮➡︎往南港火車站"], 
                ["11:00", "591", "水蓮➡︎往南港火車站"],
                ["11:30", "社巴", "水蓮➡︎往南港火車站"],
                ["12:00", "591", "水蓮➡︎往南港火車站"],
                ["12:30", "社巴", "水蓮➡︎往東湖捷運站"],
                ["13:00", "591", "水蓮➡︎往南港火車站"],
                ["13:40", "社巴", "水蓮➡︎往東湖捷運站"],
                ["14:00", "591", "水蓮➡︎往南港火車站"],
                ["14:30", "社巴", "水蓮➡︎往南港火車站"],
                ["15:00", "591", "水蓮➡︎往南港火車站"],
                ["15:30", "社巴", "水蓮➡︎往南港火車站"],
                ["16:00", "591", "水蓮➡︎往南港火車站"],
                ["16:30", "社巴", "水蓮➡︎往南港火車站"],
                ["17:00", "591", "水蓮➡︎往南港火車站"],
                ["17:30", "社巴", "水蓮➡︎往東湖捷運站"],
                ["18:00", "591", "水蓮➡︎往南港火車站"],
                ["18:40", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["19:00", "591", "水蓮➡︎往南港火車站"],
                ["19:30", "社巴", "水蓮➡︎往南港火車站"],
                ["20:00", "591", "水蓮➡︎往南港火車站"],
                ["20:30", "社巴", "水蓮➡︎往南港火車站"], 
                ["21:10", "社巴", "水蓮➡︎往東湖捷運站"],
                ["21:50", "社巴", "水蓮➡︎往東湖捷運站"], 
                ["22:20", "社巴", "水蓮➡︎往東湖捷運站"]
                ],
                from: [
                ["06:50", "社巴", "南港火車站➡︎水蓮"],
                ["07:20", "591", "南港火車站➡︎水蓮"],
                ["07:50", "社巴", "南港火車站➡︎水蓮"],
                ["08:20", "591", "南港火車站➡︎水蓮"],
                ["08:50", "社巴", "南港火車站➡︎水蓮"],
                ["09:20", "591", "南港火車站➡︎水蓮"],
                ["10:20", "591", "南港火車站➡︎水蓮"],
                ["10:50", "社巴", "南港火車站➡︎水蓮"],
                ["11:20", "591", "南港火車站➡︎水蓮"],
                ["11:50", "社巴", "南港火車站➡︎水蓮"],
                ["12:20", "591", "南港火車站➡︎水蓮"],
                ["12:45", "社巴", "東湖捷運站➡︎水蓮"], 
                ["13:20", "591", "南港火車站➡︎水蓮"],
                ["13:55", "社巴", "東湖捷運站➡︎水蓮"], 
                ["14:20", "591", "南港火車站➡︎水蓮"],
                ["14:50", "社巴", "南港火車站➡︎水蓮"],
                ["15:20", "591", "南港火車站➡︎水蓮"],
                ["15:50", "社巴", "南港火車站➡︎水蓮"],
                ["16:20", "591", "南港火車站➡︎水蓮"],
                ["16:50", "社巴", "南港火車站➡︎水蓮"],
                ["17:20", "591", "南港火車站➡︎水蓮"],
                ["17:45", "社巴", "東湖捷運站➡︎水蓮"],
                ["18:20", "591", "南港火車站➡︎水蓮"],
                ["18:55", "社巴", "東湖捷運站➡︎水蓮"], 
                ["19:20", "591", "南港火車站➡︎水蓮"],
                ["19:50", "社巴", "南港火車站➡︎水蓮"],
                ["20:20", "591", "南港火車站➡︎水蓮"],
                ["20:50", "社巴", "南港火車站➡︎水蓮"],
                ["21:25", "社巴", "東湖捷運站➡︎水蓮"], 
                ["22:05", "社巴", "東湖捷運站➡︎水蓮"],
                ["22:45", "社巴", "東湖捷運站➡︎水蓮"]
                ]
            }
        };

        // 顯示完整時刻表的函數
        function displaySchedule(schedule) {
            const tableBody = document.querySelector('#schedule tbody');
            tableBody.innerHTML = ''; // 清空表格

            schedule.forEach(([time, cartype, destination]) => {
                const newRow = tableBody.insertRow();
                newRow.insertCell().textContent = time;
                newRow.insertCell().textContent = cartype;
                newRow.insertCell().textContent = destination;

                if (cartype === "591") {
                    newRow.style.color = "red";
                }
            });
        }

        function filterSchedule() {
            const tripType = document.querySelector('input[name="tripType"]:checked').value;
            const dayType = document.getElementById('dayType').value;
            const now = new Date(); // 取得當前完整日期和時間

            const tableBody = document.querySelector('#schedule tbody');
            tableBody.innerHTML = ''; // 清空表格

            const selectedSchedule = scheduleData[dayType][tripType];

            // 過濾出比當前時間晚的班次
            const filteredData = selectedSchedule.filter(([time]) => {
                const [hours, minutes] = time.split(':').map(Number);
                const busTime = new Date(now); // 設置班次時間為當天的日期
                busTime.setHours(hours, minutes, 0, 0);

                // 如果班次時間早於當前時間，則過濾掉
                return busTime >= now;
            });

            // 顯示過濾後的班次
            filteredData.forEach(([time, cartype, destination]) => {
                const newRow = tableBody.insertRow();
                newRow.insertCell().textContent = time;
                newRow.insertCell().textContent = cartype;
                newRow.insertCell().textContent = destination;

                if (cartype === "591") {
                    newRow.style.color = "red";
                }
            });
        }

        // 篩選最近班次的函數
        function filterSchedule() {
            const tripType = document.querySelector('input[name="tripType"]:checked').value;
            const dayType = document.getElementById('dayType').value;
            const now = new Date(); // 取得當前完整日期和時間

            const selectedSchedule = scheduleData[dayType][tripType];

            // 過濾出比當前時間晚的班次
            const filteredData = selectedSchedule.filter(([time]) => {
                const [hours, minutes] = time.split(':').map(Number);
                const busTime = new Date(now);
                busTime.setHours(hours, minutes, 0, 0);

                // 如果班次時間早於當前時間，則過濾掉
                return busTime >= now;
            });

            // 使用篩選後的資料更新顯示
            displaySchedule(filteredData);
        }

        // 網頁載入時顯示完整的時刻表
        document.addEventListener('DOMContentLoaded', () => {
            const tripType = document.querySelector('input[name="tripType"]:checked').value;
            const dayType = document.getElementById('dayType').value;
            displaySchedule(scheduleData[dayType][tripType]); // 顯示初始完整時刻表
        });

        // 切換去程/回程或平日/假日時，顯示對應的完整時刻表
        document.querySelectorAll('input[name="tripType"]').forEach(radio => {
            radio.addEventListener('change', () => {
                const tripType = document.querySelector('input[name="tripType"]:checked').value;
                const dayType = document.getElementById('dayType').value;
                displaySchedule(scheduleData[dayType][tripType]); // 更新顯示完整的時刻表
            });
        });

        document.getElementById('dayType').addEventListener('change', () => {
            const tripType = document.querySelector('input[name="tripType"]:checked').value;
            const dayType = document.getElementById('dayType').value;
            displaySchedule(scheduleData[dayType][tripType]); // 更新顯示完整的時刻表
        });

        document.addEventListener('DOMContentLoaded', () => {
            filterSchedule();
        });
    </script>
</body>
</html>
